{"ast":null,"code":"var _jsxFileName = \"/Users/ioannischionas/Code/springboot/cineProject/demo-frontend/src/pages/PersonalInfo.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport useAxiosPrivate from \"../hooks/useAxiosPrivate\";\nimport Navbar from \"../components/Navbar\";\nimport useAuth from \"../hooks/useAuth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PersonalInfo = () => {\n  _s();\n\n  const {\n    auth\n  } = useAuth();\n  const navigate = useNavigate();\n  const [reservations, setReservations] = useState();\n  const axiosPrivate = useAxiosPrivate();\n  const location = useLocation();\n\n  const loadReservations = async () => {\n    let isMounted = true;\n    const controller = new AbortController();\n\n    const getReservations = async () => {\n      try {\n        const response = await axiosPrivate.get(`users/${auth === null || auth === void 0 ? void 0 : auth.username}/reservations`, {\n          signal: controller.signal\n        });\n        console.log(response.data);\n        isMounted && setReservations(response.data);\n      } catch (err) {\n        if ((err === null || err === void 0 ? void 0 : err.code) !== `ERR_CANCELED`) {\n          console.error(err);\n          navigate('/login', {\n            state: {\n              from: location\n            },\n            replace: true\n          });\n        }\n      }\n    };\n\n    getReservations();\n  };\n\n  useEffect(() => {\n    loadReservations();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Personal Information:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"First name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 16\n        }, this), \" \", auth === null || auth === void 0 ? void 0 : auth.firstname]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Last name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 16\n        }, this), \" \", auth === null || auth === void 0 ? void 0 : auth.lastname]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 16\n        }, this), \" \", auth === null || auth === void 0 ? void 0 : auth.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"My Reservations:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item-solo\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item-solo-text\",\n          children: reservations !== null && reservations !== void 0 && reservations.length ? /*#__PURE__*/_jsxDEV(\"table\", {\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Date and Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"ID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 61,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Movie\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 62,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Room\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: reservations.map((reservation, index) => {\n                var _reservation$reserved, _reservation$reserved2, _reservation$reserved3, _reservation$reserved4;\n\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: reservation === null || reservation === void 0 ? void 0 : (_reservation$reserved = reservation.reservedShowing) === null || _reservation$reserved === void 0 ? void 0 : _reservation$reserved.showingDate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: reservation === null || reservation === void 0 ? void 0 : reservation.id\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: reservation === null || reservation === void 0 ? void 0 : (_reservation$reserved2 = reservation.reservedShowing) === null || _reservation$reserved2 === void 0 ? void 0 : (_reservation$reserved3 = _reservation$reserved2.showingMovie) === null || _reservation$reserved3 === void 0 ? void 0 : _reservation$reserved3.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 71,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: reservation === null || reservation === void 0 ? void 0 : (_reservation$reserved4 = reservation.reservedShowing) === null || _reservation$reserved4 === void 0 ? void 0 : _reservation$reserved4.showingRoom\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 72,\n                    columnNumber: 45\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 41\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 32\n            }, this), \"There are no registered reservations in your name\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PersonalInfo, \"XPYY3YK32ZSKVydHSlm8J8E/jYE=\", false, function () {\n  return [useAuth, useNavigate, useAxiosPrivate, useLocation];\n});\n\n_c = PersonalInfo;\nexport default PersonalInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"PersonalInfo\");","map":{"version":3,"names":["useState","useEffect","useNavigate","useLocation","useAxiosPrivate","Navbar","useAuth","PersonalInfo","auth","navigate","reservations","setReservations","axiosPrivate","location","loadReservations","isMounted","controller","AbortController","getReservations","response","get","username","signal","console","log","data","err","code","error","state","from","replace","firstname","lastname","length","map","reservation","index","reservedShowing","showingDate","id","showingMovie","title","showingRoom"],"sources":["/Users/ioannischionas/Code/springboot/cineProject/demo-frontend/src/pages/PersonalInfo.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\"\nimport useAxiosPrivate from \"../hooks/useAxiosPrivate\";\nimport Navbar from \"../components/Navbar\";\nimport useAuth from \"../hooks/useAuth\";\n\nconst PersonalInfo = () => {\n\n    const { auth } = useAuth();\n    const navigate = useNavigate();\n    const [reservations, setReservations] = useState();\n    const axiosPrivate = useAxiosPrivate();\n    const location = useLocation();\n\n    const loadReservations = async () =>{\n        let isMounted = true;\n        const controller = new AbortController();\n\n        const getReservations = async () => {\n            try {\n                const response = await axiosPrivate.get(`users/${auth?.username}/reservations`, {\n                    signal: controller.signal\n                });\n                console.log(response.data);\n                isMounted && setReservations(response.data);\n            } catch (err) {\n                if (err?.code !== `ERR_CANCELED`) {\n                    console.error(err);\n                    navigate('/login', { state: { from: location }, replace: true });\n                }\n            }\n        }\n        \n        getReservations();\n\n    }\n\n    useEffect(\n        ()=>{\n            loadReservations()\n        },[]);\n\n    return (\n        <div>\n        <Navbar></Navbar>\n        <br/>\n        <section>\n            <h1>Personal Information:</h1>\n            <p><b>First name:</b> {auth?.firstname}</p>\n            <p><b>Last name:</b> {auth?.lastname}</p>\n            <p><b>Email:</b> {auth?.username}</p>\n            <br/>\n            <h1>My Reservations:</h1>\n            <div className=\"item-solo\">\n                    <div className=\"item-solo-text\">\n                        {reservations?.length? (\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Date and Time</th>\n                                        <th>ID</th>\n                                        <th>Movie</th>\n                                        <th>Room</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {reservations.map((reservation, index) => (\n                                        <tr key={index}>\n                                            <td>{reservation?.reservedShowing?.showingDate}</td>\n                                            <td>{reservation?.id}</td>\n                                            <td>{reservation?.reservedShowing?.showingMovie?.title}</td>\n                                            <td>{reservation?.reservedShowing?.showingRoom}</td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        ) : <p><br />There are no registered reservations in your name</p>\n                        }\n                    </div>\n                </div>\n        </section>\n        </div>\n    )\n}\n\nexport default PersonalInfo"],"mappings":"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"},"metadata":{},"sourceType":"module"}